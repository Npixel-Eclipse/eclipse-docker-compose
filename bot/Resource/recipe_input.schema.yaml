$schema: http://json-schema.org/draft-04/schema#
type: array
items:
  type: object
  additionalProperties: false
  required:
    - Id
    - Name
    - Input
    - Output
  properties:
    Id:
      type: integer
      minimum: 1
    
    #네이밍 규칙
    #제작: Craft_Input_결과물아이템이름 (ex. Craft_Input_Weapon_Sword_AlligatorSword)
    #합성: Merge_Input_PolyG1toG2 (합성 재료/결과를 직관적으로 알기 위해 등급 숫자를 적어주는 형태)
    Name:
      type: string
      pattern: ^[A-Z][A-Za-z0-9_]*$
    DesignComment:
      type: string
    Comment:
      type: string
    #테이블 셀
    Input:
      type: array
      items:
        type: object
        additionalProperties: false
        required:
          - Id
        properties:
          Id:
            type: integer
            minimum: 1
              
          #동일한 Group으로 설정된 재료들은 서로 1:1 대체 가능.
          Group:
            type: integer
          
          #값이 있으면 아이템을 특정하여 재료로 사용할 수 있다.
          Item:
            type: string
            ref: item
          
          #-------------------------------------
          # 아래 기재된 속성들이 모두 일치하는 아이템들을 재료로 사용할 수 있다.
          # item.yaml에서 정의하는 속성은 Item이 특정될 경우에 무효함.(ex. Category, Grade 등)
          # 동적으로 할당되는 속성은 Item이 특정되어도 유효함.(ex. EnchantLevel)
          Category:
            type: string
            ref: item_category
          Grade:
            type: string
            ref: grade
          EnchantLevel:
            type: integer
            default: 0
          # 모든 EnchantLevel을 투입할 수 있게 설정
          AllEnchantLevel:
            type: boolean
          #--------------------------------------

          #재료의 필요 수량
          Amount:
            type: integer
            minimum: 1
            default: 1

          # 재료 타입 - Base 아이템만 입력해야 한다. (Base 아이템이 아닌 경우, 아이템 서버 떨어짐)
          # Base 아이템 : item.yaml에서 Base 컬럼이 빈 칸인 아이템
          InputType:
            type: string
            enum:
              - None
              - MergeMaterialRequire 
              - MergeMaterialResultUp 

          # 만료기간이 있는 아이템도 재료로 투입 가능 여부
          AllowDuration:
            type: boolean
          
          # 실패 시 돌려줄 아이템
          ## 이 재료을 사용한 레시피의 결과가 Failure에 해당하는 경우 이 아이템을 돌려준다.
          ## 재료의 Property(강화, 세공)를 그대로 상속받는다.
          ReturnItemOnFailure:
            type: string
            ref: item
            

    #동일한 Output을 연결하면 레시피 전체를 대체한다.
    Output:
      type: string
      ref: recipe_output